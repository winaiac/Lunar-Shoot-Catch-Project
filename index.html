<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Superhuman Evolution Interface v4 - Full Content Restored</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Firebase SDKs (Modular) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, increment, onSnapshot, collection } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'med5d-default';

        // Initialize Firebase
        let app, auth, db;
        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
        } catch (e) {
            console.error("Firebase init error:", e);
        }

        window.firebaseModules = { auth, db, signInAnonymously, signInWithCustomToken, onAuthStateChanged, doc, getDoc, setDoc, updateDoc, increment, onSnapshot, collection, appId };
    </script>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@300;400;600;700&family=Noto+Sans+Thai:wght@300;400;600&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --neon-blue: #0EA5E9;
            /* 3D: Bio */
            --neon-purple: #D946EF;
            /* 4D: Psi */
            --neon-gold: #F59E0B;
            /* 5D: Cosmic */
            --neon-green: #10B981;
            /* Research */
            --bg-dark: #020617;
        }

        body {
            font-family: 'Noto Sans Thai', sans-serif;
            background-color: var(--bg-dark);
            color: #E2E8F0;
            overflow-x: hidden;
            background-image:
                radial-gradient(circle at 50% 0%, #1e293b 0%, transparent 40%),
                radial-gradient(circle at 0% 100%, #0f172a 0%, transparent 30%);
        }

        h1,
        h2,
        h3,
        h4,
        .sci-fi-font {
            font-family: 'Chakra Petch', sans-serif;
        }

        .code-font {
            font-family: 'JetBrains Mono', monospace;
        }

        /* --- UI Elements --- */
        .glass-panel {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .nav-btn.active {
            background: linear-gradient(90deg, rgba(14, 165, 233, 0.1), rgba(217, 70, 239, 0.1));
            border-bottom: 2px solid var(--neon-blue);
            color: var(--neon-blue);
            text-shadow: 0 0 8px rgba(14, 165, 233, 0.5);
        }

        .mode-btn {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #94A3B8;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(4px);
        }

        .mode-btn:hover {
            border-color: white;
            color: white;
            transform: translateY(-2px);
        }

        .mode-btn.selected-3d {
            border-color: var(--neon-blue);
            color: var(--neon-blue);
            box-shadow: 0 0 15px rgba(14, 165, 233, 0.3);
            background: rgba(14, 165, 233, 0.1);
        }

        .mode-btn.selected-4d {
            border-color: var(--neon-purple);
            color: var(--neon-purple);
            box-shadow: 0 0 15px rgba(217, 70, 239, 0.3);
            background: rgba(217, 70, 239, 0.1);
        }

        .mode-btn.selected-5d {
            border-color: var(--neon-gold);
            color: var(--neon-gold);
            box-shadow: 0 0 15px rgba(245, 158, 11, 0.3);
            background: rgba(245, 158, 11, 0.1);
        }

        /* --- IMMERSIVE WRAPPER --- */
        #immersive-stage {
            position: relative;
            width: 100%;
            height: 500px;
            border-radius: 1rem;
            overflow: hidden;
            background: radial-gradient(circle at center, #0f172a 0%, #020617 100%);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 10;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        @media (min-width: 768px) {
            #immersive-stage {
                height: 600px;
            }
        }

        #immersive-stage.immersive-active {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            border-radius: 0 !important;
            z-index: 999999 !important;
            margin: 0 !important;
        }

        #three-canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* --- UI Overlay --- */
        .ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 20;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .ui-overlay-top {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            pointer-events: auto;
        }

        .ui-overlay-center {
            text-align: center;
            position: absolute;
            top: 45%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            pointer-events: none;
        }

        .ui-overlay-bottom {
            background: linear-gradient(to top, rgba(2, 6, 23, 0.95) 0%, rgba(2, 6, 23, 0) 100%);
            padding: 3rem 1rem 1.5rem 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            pointer-events: auto;
        }

        .immersive-btn-exit {
            display: none;
        }

        #immersive-stage.immersive-active .immersive-btn-exit {
            display: flex;
        }

        #immersive-stage.immersive-active .immersive-btn-enter {
            display: none;
        }

        @keyframes pulse-glow {

            0%,
            100% {
                text-shadow: 0 0 10px currentColor;
                opacity: 1;
            }

            50% {
                text-shadow: 0 0 20px currentColor;
                opacity: 0.8;
            }
        }

        .text-glow {
            animation: pulse-glow 3s infinite;
        }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scroll::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }

        .custom-scroll::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Status Bar Animation */
        @keyframes scanline {
            0% {
                background-position: 0% 50%;
            }

            100% {
                background-position: 100% 50%;
            }
        }

        .status-bar {
            background: linear-gradient(90deg, rgba(14, 165, 233, 0.1), rgba(217, 70, 239, 0.1), rgba(14, 165, 233, 0.1));
            background-size: 200% 200%;
            animation: scanline 5s linear infinite;
        }

        /* Research Items */
        .research-item {
            border-left: 2px solid #334155;
            transition: all 0.2s ease;
        }

        .research-item:hover {
            border-left-color: var(--neon-green);
            background: rgba(255, 255, 255, 0.02);
            padding-left: 1rem;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 glass-panel border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex flex-col md:flex-row items-center justify-between h-auto md:h-20 py-3 md:py-0">
                <div class="flex flex-col mb-2 md:mb-0 w-full md:w-auto">
                    <div class="flex items-center gap-3 justify-between md:justify-start">
                        <div class="flex items-center gap-3">
                            <div class="relative w-4 h-4">
                                <div class="absolute w-full h-full rounded-full bg-cyan-500 animate-ping opacity-75">
                                </div>
                                <div class="relative w-full h-full rounded-full bg-cyan-500"></div>
                            </div>
                            <span
                                class="sci-fi-font text-xl md:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-purple-400 to-yellow-400 tracking-wider">
                                MED5D INTERFACE
                            </span>
                        </div>
                        <!-- Mobile Status (visible only on small screens) -->
                        <div class="flex md:hidden items-center gap-2 text-[10px] code-font text-cyan-400">
                            <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></span>
                            <span id="mobile-online-count">CONN...</span>
                        </div>
                    </div>
                    <a href="https://www.facebook.com/winayo1/" target="_blank"
                        class="text-[10px] text-gray-400 hover:text-cyan-400 transition-colors md:ml-7 flex items-center gap-1 group mt-1">
                        <span>Creative Concept by Mr. Winai Phanarkat</span>
                    </a>
                </div>

                <!-- Navigation Tabs -->
                <div
                    class="flex space-x-1 md:space-x-4 overflow-x-auto w-full md:w-auto pb-2 md:pb-0 justify-center md:justify-end no-scrollbar">
                    <button onclick="switchTab('practice')" id="tab-practice"
                        class="nav-btn active sci-fi-font px-3 md:px-4 py-2 text-xs md:text-sm font-bold hover:text-white transition-colors tracking-wide whitespace-nowrap">
                        PROTOCOL
                    </button>
                    <button onclick="switchTab('dashboard')" id="tab-dashboard"
                        class="nav-btn sci-fi-font px-3 md:px-4 py-2 text-xs md:text-sm font-bold hover:text-white transition-colors tracking-wide whitespace-nowrap">
                        METRICS
                    </button>
                    <button onclick="switchTab('research')" id="tab-research"
                        class="nav-btn sci-fi-font px-3 md:px-4 py-2 text-xs md:text-sm font-bold hover:text-white transition-colors tracking-wide whitespace-nowrap flex items-center gap-2">
                        <span>RESEARCH</span>
                        <span
                            class="bg-gray-700 text-[9px] px-1 rounded text-green-400 border border-green-900/50">DB</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Live Status Bar (Desktop) -->
        <div
            class="hidden md:flex status-bar h-8 border-t border-gray-800 items-center justify-between px-6 text-[10px] code-font text-gray-400">
            <div class="flex gap-6">
                <span class="flex items-center gap-2">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    SYSTEM STATUS: ONLINE
                </span>
                <span class="flex items-center gap-2" title="Simulated Active Nodes">
                    <span class="text-cyan-400">‚ö° LIVE NODES:</span>
                    <span id="online-count" class="text-white font-bold">CALCULATING...</span>
                </span>
            </div>
            <div class="flex gap-6">
                <span class="flex items-center gap-2">
                    <span class="text-purple-400">TOTAL ACTIVATIONS:</span>
                    <span id="total-visits" class="text-white font-bold">LOADING...</span>
                </span>
                <span>SERVER: ASIA-PACIFIC-1</span>
                <span>LATENCY: 24ms</span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto w-full p-4 md:p-6 space-y-6 relative">

        <!-- ======================= TAB 1: VISUALIZER (PROTOCOL) ======================= -->
        <div id="practice-view" class="space-y-4 animate-fade-in">

            <div class="flex justify-between items-end mb-2">
                <div class="space-y-1">
                    <h2 class="text-2xl md:text-3xl font-bold text-white sci-fi-font tracking-widest text-glow"
                        id="dimension-title">Bio-Optimization</h2>
                    <p class="text-gray-400 text-xs md:text-sm" id="dimension-desc">
                        ‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏ã‡∏•‡∏•‡πå‡∏™‡∏°‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏™‡∏π‡πà‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</p>
                </div>
                <!-- Mobile Only Stats -->
                <div class="md:hidden text-right text-[10px] code-font text-gray-500">
                    <div>TOTAL: <span id="mobile-total-visits" class="text-purple-400">...</span></div>
                </div>
            </div>

            <!-- IMMERSIVE STAGE -->
            <div id="immersive-stage">
                <div id="three-canvas-container"></div>

                <!-- UI Overlay -->
                <div class="ui-overlay">
                    <!-- Top Controls -->
                    <div class="ui-overlay-top">
                        <div
                            class="text-[10px] code-font text-cyan-500/50 border border-cyan-900/30 p-1 px-2 rounded bg-black/20 backdrop-blur-sm self-start">
                            SYNC: <span id="sync-rate">98.4%</span>
                        </div>
                        <div class="flex gap-3">
                            <button onclick="toggleImmersive()"
                                class="immersive-btn-enter bg-black/40 hover:bg-white/10 p-2.5 rounded-lg text-white transition-all border border-white/10 backdrop-blur-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
                                </svg>
                            </button>
                            <button onclick="toggleImmersive()"
                                class="immersive-btn-exit bg-red-600/80 hover:bg-red-500 p-2.5 rounded-full text-white transition-all shadow-lg border border-white/20">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Center Display -->
                    <div class="ui-overlay-center">
                        <div id="timerDisplay"
                            class="sci-fi-font text-7xl md:text-9xl font-bold text-cyan-400 drop-shadow-[0_0_30px_rgba(0,0,0,0.8)] transition-colors duration-500">
                            Ready</div>
                        <div id="instructionText"
                            class="text-xl md:text-3xl font-bold text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)] mt-4 sci-fi-font tracking-wider uppercase">
                            ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏ö</div>
                    </div>

                    <!-- Bottom Controls -->
                    <div class="ui-overlay-bottom">
                        <div class="flex flex-wrap justify-center gap-3 w-full max-w-3xl mb-4"
                            id="cycleSelectorContainer">
                            <button onclick="selectDimension(3)"
                                class="mode-btn selected-3d flex-1 min-w-[100px] py-2 px-3 rounded-xl flex flex-col items-center gap-1 group"
                                id="btn-dim-3">
                                <div class="flex items-center gap-2"><span class="text-lg">üß¨</span><span
                                        class="sci-fi-font font-bold">Bio-Opt</span></div>
                                <span
                                    class="text-[9px] uppercase tracking-wider opacity-70 group-hover:opacity-100 hidden md:block">‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢
                                    & ‡∏™‡∏°‡∏≠‡∏á</span>
                            </button>
                            <button onclick="selectDimension(4)"
                                class="mode-btn flex-1 min-w-[100px] py-2 px-3 rounded-xl flex flex-col items-center gap-1 group"
                                id="btn-dim-4">
                                <div class="flex items-center gap-2"><span class="text-lg">üîÆ</span><span
                                        class="sci-fi-font font-bold">Psi-Active</span></div>
                                <span
                                    class="text-[9px] uppercase tracking-wider opacity-70 group-hover:opacity-100 hidden md:block">‡∏û‡∏•‡∏±‡∏á‡∏à‡∏¥‡∏ï
                                    & ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î</span>
                            </button>
                            <button onclick="selectDimension(5)"
                                class="mode-btn flex-1 min-w-[100px] py-2 px-3 rounded-xl flex flex-col items-center gap-1 group"
                                id="btn-dim-5">
                                <div class="flex items-center gap-2"><span class="text-lg">üëΩ</span><span
                                        class="sci-fi-font font-bold">Cosmic</span></div>
                                <span
                                    class="text-[9px] uppercase tracking-wider opacity-70 group-hover:opacity-100 hidden md:block">‡∏¢‡∏≠‡∏î‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå
                                    & ‡∏ï‡πà‡∏≤‡∏á‡∏î‡∏≤‡∏ß</span>
                            </button>
                        </div>

                        <div class="relative group">
                            <div
                                class="absolute -inset-1 bg-gradient-to-r from-blue-600 via-purple-600 to-yellow-600 rounded-full blur opacity-25 group-hover:opacity-75 transition duration-1000 group-hover:duration-200">
                            </div>
                            <button onclick="startBreathing()" id="startBtn"
                                class="relative px-12 py-3 bg-gray-900 ring-1 ring-gray-600 hover:bg-gray-800 text-white font-bold rounded-full transition-all sci-fi-font text-lg tracking-[0.2em] flex items-center gap-3">
                                <span class="animate-pulse">‚ñ∂</span> ACTIVATE
                            </button>
                        </div>
                        <button onclick="stopBreathing()" id="stopBtn"
                            class="hidden px-12 py-3 bg-red-900/90 hover:bg-red-800 text-white font-bold rounded-full border border-red-500 transition-all sci-fi-font text-lg tracking-[0.2em] shadow-[0_0_30px_rgba(220,38,38,0.4)]">‚ñ†
                            TERMINATE</button>
                    </div>
                </div>
            </div>

            <!-- Context Info -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-xs text-gray-400 mt-2 code-font">
                <div class="glass-panel p-3 rounded flex items-center justify-center gap-2 border-l-2 border-blue-500">
                    <span class="font-bold text-blue-400">PHASE 1:</span> Oxygenate (‡πÄ‡∏ï‡∏¥‡∏°‡∏û‡∏•‡∏±‡∏á)
                </div>
                <div
                    class="glass-panel p-3 rounded flex items-center justify-center gap-2 border-l-2 border-purple-500">
                    <span class="font-bold text-purple-400">PHASE 2:</span> Absorb (‡∏ã‡∏∂‡∏°‡∏ã‡∏±‡∏ö)
                </div>
                <div
                    class="glass-panel p-3 rounded flex items-center justify-center gap-2 border-l-2 border-yellow-500">
                    <span class="font-bold text-yellow-400">PHASE 3:</span> Transmit (‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì)
                </div>
            </div>
        </div>

        <!-- ======================= TAB 2: DASHBOARD (METRICS) - CONTENT RESTORED ======================= -->
        <div id="dashboard-view" class="hidden space-y-8 animate-fade-in dashboard-metrics pb-12">
            <div class="flex flex-col md:flex-row justify-between items-end border-b border-gray-800 pb-4 gap-4">
                <div>
                    <h2 class="text-2xl font-bold text-white sci-fi-font">Evolution Analytics</h2>
                    <p class="text-gray-400 text-sm">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ß‡∏¥‡∏ß‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì</p>
                </div>
                <div class="flex gap-4 text-right">
                    <div>
                        <p class="text-[10px] text-gray-500 code-font">PSYCHIC LEVEL</p>
                        <p class="sci-fi-font text-lg text-purple-400">CLASS IV</p>
                    </div>
                    <div>
                        <p class="text-[10px] text-gray-500 code-font">CONTACT STATUS</p>
                        <p class="sci-fi-font text-lg text-yellow-400 animate-pulse">LISTENING...</p>
                    </div>
                </div>
            </div>

            <!-- Knowledge Cards (RESTORED - FULL CONTENT) -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

                <!-- CARD 1: BIO-OPTIMIZATION -->
                <div
                    class="glass-panel p-6 rounded-xl border-t-4 border-blue-500 hover:bg-gray-800/50 transition-colors custom-scroll">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-3xl">üß¨</span>
                        <h3 class="text-blue-400 font-bold sci-fi-font text-xl">Bio-Optimization</h3>
                    </div>
                    <div class="text-xs text-gray-300 space-y-4">
                        <div class="space-y-1">
                            <h4 class="font-bold text-white text-sm">‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏£‡∏∞‡∏î‡∏±‡∏ö DNA (Telomere)</h4>
                            <p class="text-gray-400 leading-relaxed pl-2 border-l-2 border-blue-500/30">
                                ‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏° "‡πÄ‡∏ó‡πÇ‡∏•‡πÄ‡∏°‡∏µ‡∏¢‡∏£‡πå" ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡πÇ‡∏°‡πÇ‡∏ã‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï
                                ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏™‡∏°‡∏≤‡∏ò‡∏¥‡∏•‡∏∂‡∏Å‡∏ä‡πà‡∏ß‡∏¢‡∏ä‡∏∞‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏´‡∏î‡∏™‡∏±‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏ó‡πÇ‡∏•‡πÄ‡∏°‡∏µ‡∏¢‡∏£‡πå ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ã‡∏•‡∏•‡πå‡πÅ‡∏Å‡πà‡∏ä‡πâ‡∏≤‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏¢‡πâ‡∏≠‡∏ô‡∏ß‡∏±‡∏¢‡∏ó‡∏≤‡∏á‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û
                                (Reverse Aging)
                            </p>
                        </div>
                        <div class="space-y-1">
                            <h4 class="font-bold text-white text-sm">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏•‡∏±‡∏á‡∏™‡∏°‡∏≠‡∏á (Neuroplasticity)</h4>
                            <p class="text-gray-400 leading-relaxed pl-2 border-l-2 border-blue-500/30">
                                ‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏¢‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ó‡πÉ‡∏´‡∏°‡πà (New Neural Pathways) ‡∏™‡∏°‡∏≠‡∏á‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡∏™‡∏π‡∏á
                                ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° ‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏≠‡∏±‡∏•‡πÑ‡∏ã‡πÄ‡∏°‡∏≠‡∏£‡πå ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡∏™‡∏°‡∏≠‡∏á
                                Gamma
                            </p>
                        </div>
                        <div class="space-y-1">
                            <h4 class="font-bold text-white text-sm">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏†‡∏≤‡∏û</h4>
                            <p class="text-gray-400 leading-relaxed pl-2 border-l-2 border-blue-500/30">
                                ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πÇ‡∏ó‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏î‡∏£‡∏µ‡∏¢ (‡πÄ‡∏ï‡∏≤‡∏õ‡∏è‡∏¥‡∏Å‡∏£‡∏ì‡πå‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡πÄ‡∏ã‡∏•‡∏•‡πå) ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏∂‡∏î
                                ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á‡∏î‡∏∏‡∏à‡πÄ‡∏Å‡∏£‡∏≤‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏†‡∏±‡∏¢
                            </p>
                        </div>
                    </div>
                </div>

                <!-- CARD 2: PSI-ACTIVATION -->
                <div
                    class="glass-panel p-6 rounded-xl border-t-4 border-purple-500 hover:bg-gray-800/50 transition-colors custom-scroll">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-3xl">üîÆ</span>
                        <h3 class="text-purple-400 font-bold sci-fi-font text-xl">Psi-Activation</h3>
                    </div>
                    <div class="text-xs text-gray-300 space-y-4">
                        <div class="space-y-1">
                            <h4 class="font-bold text-white text-sm">‡∏û‡∏•‡∏±‡∏á‡∏à‡∏¥‡∏ï (Telepathy/Intuition)</h4>
                            <p class="text-gray-400 leading-relaxed pl-2 border-l-2 border-purple-500/30">
                                ‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ó‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏ó‡∏µ‡πà 6 ‡πÉ‡∏´‡πâ‡∏ï‡∏∑‡πà‡∏ô‡∏ï‡∏±‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏¥‡∏ï‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (Direct Knowing)
                                ‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡πÉ‡∏à ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏à‡∏¥‡∏ï‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏û‡∏π‡∏î
                            </p>
                        </div>
                        <div class="space-y-1">
                            <h4 class="font-bold text-white text-sm">‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î (Mindset)</h4>
                            <p class="text-gray-400 leading-relaxed pl-2 border-l-2 border-purple-500/30">
                                ‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û (Subconscious Reprogramming) ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á
                                "‡∏ä‡∏∏‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞" ‡∏•‡∏á‡πÑ‡∏õ‡πÉ‡∏´‡∏°‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡∏∏‡∏à‡∏ã‡∏π‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå
                            </p>
                        </div>
                        <div class="space-y-1">
                            <h4 class="font-bold text-white text-sm">‡∏ß‡∏≤‡∏à‡∏≤‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Manifestation Speech)</h4>
                            <p class="text-gray-400 leading-relaxed pl-2 border-l-2 border-purple-500/30">
                                ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ß‡∏≤‡∏à‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏û‡∏≤‡∏∞ (Frequency Match) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•
                                ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡∏û‡∏π‡∏î‡∏à‡∏∞‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á (Reality Hacking)
                                ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏£‡∏á‡∏™‡∏±‡πà‡∏ô‡∏™‡∏∞‡πÄ‡∏ó‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏™‡∏≤‡∏£‡πÑ‡∏î‡πâ
                            </p>
                        </div>
                    </div>
                </div>

                <!-- CARD 3: COSMIC CONTACT -->
                <div
                    class="glass-panel p-6 rounded-xl border-t-4 border-yellow-500 hover:bg-gray-800/50 transition-colors custom-scroll">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-3xl">üõ∏</span>
                        <h3 class="text-yellow-400 font-bold sci-fi-font text-xl">Cosmic Contact</h3>
                    </div>
                    <div class="text-xs text-gray-300 space-y-4">
                        <div class="space-y-1">
                            <h4 class="font-bold text-white text-sm">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏à‡∏¥‡∏ï‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏• (Unity)</h4>
                            <p class="text-gray-400 leading-relaxed pl-2 border-l-2 border-yellow-500/30">
                                ‡∏™‡∏†‡∏≤‡∏ß‡∏∞ "‡πÄ‡∏≠‡∏Å‡∏†‡∏≤‡∏û" (Oneness) ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏∞‡∏´‡∏ô‡∏±‡∏Å‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏™‡∏£‡∏£‡∏û‡∏™‡∏¥‡πà‡∏á ‡πÑ‡∏£‡πâ‡∏ï‡∏±‡∏ß‡∏ï‡∏ô
                                ‡πÑ‡∏£‡πâ‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡πÅ‡∏¢‡∏Å ‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡πÑ‡∏£‡πâ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÅ‡∏•‡∏∞‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏ç‡∏≤‡∏ì‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
                            </p>
                        </div>
                        <div class="space-y-1">
                            <h4 class="font-bold text-white text-sm">‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏ï‡πà‡∏≤‡∏á‡∏°‡∏¥‡∏ï‡∏¥ (CE-5 Protocol)</h4>
                            <p class="text-gray-400 leading-relaxed pl-2 border-l-2 border-yellow-500/30">
                                ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏™‡∏°‡∏≤‡∏ò‡∏¥‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏¥‡∏ç‡πÅ‡∏•‡∏∞‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ó‡∏£‡∏á‡∏†‡∏π‡∏°‡∏¥‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡∏≤‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏î‡∏≤‡∏ß (ETs)
                                ‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏±‡∏ô‡∏ï‡∏¥‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏≤‡∏£‡∏ñ‡∏ô‡∏≤‡∏î‡∏µ
                            </p>
                        </div>
                        <div class="space-y-1">
                            <h4 class="font-bold text-white text-sm">‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡∏¢‡∏≠‡∏î‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå (Superhuman)</h4>
                            <p class="text-gray-400 leading-relaxed pl-2 border-l-2 border-yellow-500/30">
                                ‡∏à‡∏∏‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ß‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå‡∏Å‡πâ‡∏≤‡∏ß‡∏Ç‡πâ‡∏≤‡∏°‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ó‡∏≤‡∏á‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡πÉ‡∏´‡∏°‡πà (Homo
                                Luminous - ‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå‡πÅ‡∏´‡πà‡∏á‡πÅ‡∏™‡∏á) ‡∏ú‡∏π‡πâ‡∏°‡∏µ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏ó‡∏¥‡∏û‡∏¢‡πå‡πÅ‡∏•‡∏∞‡∏à‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡∏ï‡∏∑‡πà‡∏ô‡∏£‡∏π‡πâ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="glass-panel p-6 rounded-xl">
                    <h3 class="sci-fi-font text-white mb-4 flex items-center gap-2"><span
                            class="w-2 h-2 rounded-full bg-blue-500"></span> Potential Radar</h3>
                    <div class="h-64 w-full"><canvas id="dimChart"></canvas></div>
                </div>
                <div class="glass-panel p-6 rounded-xl">
                    <h3 class="sci-fi-font text-white mb-4 flex items-center gap-2"><span
                            class="w-2 h-2 rounded-full bg-purple-500"></span> Frequency Ascension</h3>
                    <div class="h-64 w-full"><canvas id="freqChart"></canvas></div>
                </div>
            </div>
        </div>

        <!-- ======================= TAB 3: RESEARCH (DB) ======================= -->
        <div id="research-view" class="hidden space-y-8 animate-fade-in pb-12">
            <div class="flex flex-col md:flex-row justify-between items-end border-b border-gray-800 pb-4 gap-4">
                <div>
                    <h2 class="text-2xl font-bold text-green-400 sci-fi-font flex items-center gap-2">
                        <span class="text-xl">üìÅ</span> CLASSIFIED ARCHIVES
                    </h2>
                    <p class="text-gray-400 text-sm">‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏ó‡∏≤‡∏á‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏Ñ‡∏ß‡πâ‡∏≤ (Scientific Evidence & Research)
                    </p>
                </div>
                <div class="text-right">
                    <p class="text-[10px] text-gray-500 code-font">SECURITY CLEARANCE</p>
                    <p class="sci-fi-font text-lg text-green-400">LEVEL 5 ACCESS GRANTED</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

                <!-- Research Block 1: Bio -->
                <div class="glass-panel p-6 rounded-xl relative overflow-hidden group">
                    <div class="absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity">
                        <svg class="w-24 h-24 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                            <path
                                d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z" />
                        </svg>
                    </div>
                    <h3 class="text-blue-400 font-bold sci-fi-font text-lg mb-4 border-b border-blue-900/50 pb-2">
                        BIO-OPTIMIZATION DATA</h3>
                    <div class="space-y-4 code-font text-xs md:text-sm text-gray-300">
                        <div class="research-item pl-3">
                            <h4 class="text-white font-bold">1. Neuroplasticity & Meditation</h4>
                            <p class="mt-1 text-gray-400">Harvard University (Lazar et al., 2005):
                                ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏™‡∏°‡∏≤‡∏ò‡∏¥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡∏Ç‡∏≠‡∏á‡∏™‡∏°‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô Cortex
                                ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à ‡πÅ‡∏•‡∏∞‡∏ä‡∏∞‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏∑‡πà‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡∏•‡∏•‡πå‡∏™‡∏°‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏¢</p>
                        </div>
                        <div class="research-item pl-3">
                            <h4 class="text-white font-bold">2. Telomere Effect</h4>
                            <p class="mt-1 text-gray-400">University of California (Blackburn et al.):
                                ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡πÇ‡∏•‡πÄ‡∏°‡∏µ‡∏¢‡∏£‡πå‡∏™‡∏±‡πâ‡∏ô‡∏•‡∏á ‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏à‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢‡∏•‡∏∂‡∏Å‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡πÄ‡∏≠‡∏ô‡πÑ‡∏ã‡∏°‡πå
                                Telomerase ‡∏ã‡∏∂‡πà‡∏á‡∏ä‡πà‡∏ß‡∏¢‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏° DNA ‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ç‡∏±‡∏¢‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏ã‡∏•‡∏•‡πå</p>
                        </div>
                    </div>
                </div>

                <!-- Research Block 2: Psi -->
                <div class="glass-panel p-6 rounded-xl relative overflow-hidden group">
                    <div class="absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity">
                        <svg class="w-24 h-24 text-purple-500" fill="currentColor" viewBox="0 0 20 20">
                            <path
                                d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-2 0 1 1 0 112 0v-1zM5.343 5.757a1 1 0 011.414-1.414l.707.707a1 1 0 01-1.414 1.414l-.707-.707zM2 10a1 1 0 012 0 1 1 0 01-2 0v-1zM10 18a1 1 0 100-2 1 1 0 000 2h1z" />
                        </svg>
                    </div>
                    <h3 class="text-purple-400 font-bold sci-fi-font text-lg mb-4 border-b border-purple-900/50 pb-2">
                        PSI & FREQUENCY DATA</h3>
                    <div class="space-y-4 code-font text-xs md:text-sm text-gray-300">
                        <div class="research-item pl-3">
                            <h4 class="text-white font-bold">1. Gamma Synchrony</h4>
                            <p class="mt-1 text-gray-400">University of Wisconsin-Madison (Lutz et al., 2004):
                                ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡∏™‡∏°‡∏≠‡∏á‡πÅ‡∏Å‡∏°‡∏°‡∏≤ (Gamma Waves) ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô‡∏™‡∏π‡∏á‡πÉ‡∏ô‡∏û‡∏£‡∏∞‡∏†‡∏¥‡∏Å‡∏©‡∏∏‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏Ç‡∏ì‡∏∞‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏°‡∏ï‡∏ï‡∏≤
                                ‡∏ã‡∏∂‡πà‡∏á‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏∑‡πà‡∏ô‡∏£‡∏π‡πâ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á</p>
                        </div>
                        <div class="research-item pl-3">
                            <h4 class="text-white font-bold">2. Heart Coherence</h4>
                            <p class="mt-1 text-gray-400">HeartMath Institute: ‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô
                                (Coherence) ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏ó‡∏≤‡∏á‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û (Bio-Field)
                                ‡∏ó‡∏µ‡πà‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏£‡∏≠‡∏ö‡∏Ç‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ</p>
                        </div>
                    </div>
                </div>

                <!-- Research Block 3: Quantum -->
                <div
                    class="glass-panel p-6 rounded-xl relative overflow-hidden group lg:col-span-2 border border-yellow-500/30">
                    <div class="absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity">
                        <svg class="w-32 h-32 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
                            <path
                                d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" />
                        </svg>
                    </div>
                    <h3 class="text-yellow-400 font-bold sci-fi-font text-lg mb-4 border-b border-yellow-900/50 pb-2">
                        QUANTUM CONSCIOUSNESS & COSMIC THEORY</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 code-font text-xs md:text-sm text-gray-300">
                        <div class="research-item pl-3">
                            <h4 class="text-white font-bold">Orch-OR Theory (Penrose & Hameroff)</h4>
                            <p class="mt-1 text-gray-400">‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏ô‡∏≠‡∏ß‡πà‡∏≤‡∏à‡∏¥‡∏ï‡∏™‡∏≥‡∏ô‡∏∂‡∏Å‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≠‡∏ô‡∏ï‡∏±‡∏°‡πÉ‡∏ô‡∏ó‡πà‡∏≠
                                Microtubules ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏ã‡∏•‡∏•‡πå‡∏™‡∏°‡∏≠‡∏á ‡∏ã‡∏∂‡πà‡∏á‡∏≠‡∏≤‡∏à‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
                                (Quantum Entanglement) ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏à‡∏¥‡∏ï‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ</p>
                        </div>
                        <div class="research-item pl-3">
                            <h4 class="text-white font-bold">The Double-Slit Experiment</h4>
                            <p class="mt-1 text-gray-400">‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏™‡∏π‡∏à‡∏ô‡πå‡∏ß‡πà‡∏≤ "‡∏ú‡∏π‡πâ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï" (Observer)
                                ‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ
                                ‡∏ã‡∏∂‡πà‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏à‡∏¥‡∏ï‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ (Reality Creation)
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </main>

    <script>
        // --- Tab Switching Logic ---
        function switchTab(tab) {
            const tabs = ['practice', 'dashboard', 'research'];

            tabs.forEach(t => {
                const view = document.getElementById(`${t}-view`);
                const btn = document.getElementById(`tab-${t}`);
                if (t === tab) {
                    view.classList.remove('hidden');
                    btn.classList.add('active');
                } else {
                    view.classList.add('hidden');
                    btn.classList.remove('active');
                }
            });

            if (tab === 'practice') {
                setTimeout(onWindowResize, 100);
            } else if (tab === 'dashboard') {
                if (typeof dimChart !== 'undefined') dimChart.resize();
                if (typeof freqChart !== 'undefined') freqChart.resize();
            }
        }

        // --- Firebase & Counters Logic ---
        async function initFirebaseLogic() {
            // Wait for firebaseModules to be ready
            if (!window.firebaseModules) {
                setTimeout(initFirebaseLogic, 500);
                return;
            }

            const { auth, db, signInAnonymously, signInWithCustomToken, doc, getDoc, setDoc, updateDoc, increment, onSnapshot, collection, appId, onAuthStateChanged } = window.firebaseModules;

            if (!auth || !db) {
                console.log("Firebase not initialized - Using simulated fallback");
                simulateCounters();
                return;
            }

            // Authentication
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (err) {
                console.error("Auth failed:", err);
            }

            // Real-time Listener for TOTAL Stats
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    const statsRef = doc(db, 'artifacts', appId, 'public', 'data', 'global_stats');

                    try {
                        await setDoc(statsRef, { last_updated: new Date() }, { merge: true });
                        await updateDoc(statsRef, {
                            total_visits: increment(1)
                        });
                    } catch (e) {
                        if (e.code === 'not-found') {
                            await setDoc(statsRef, { total_visits: 1 });
                        }
                    }

                    onSnapshot(statsRef, (docSnap) => {
                        if (docSnap.exists()) {
                            const data = docSnap.data();
                            const total = data.total_visits || 0;
                            updateCounterUI(total);
                        }
                    }, (error) => {
                        console.error("Snapshot error:", error);
                        simulateCounters();
                    });

                    startOnlineSimulation();

                } else {
                    simulateCounters();
                }
            });
        }

        function updateCounterUI(total) {
            const fmt = new Intl.NumberFormat('en-US').format(total);
            const elDesktop = document.getElementById('total-visits');
            const elMobile = document.getElementById('mobile-total-visits');
            if (elDesktop) elDesktop.innerText = fmt;
            if (elMobile) elMobile.innerText = fmt;
        }

        function startOnlineSimulation() {
            setInterval(() => {
                const base = 120;
                const rand = Math.floor(Math.random() * 40);
                const count = base + rand;

                const elDesktop = document.getElementById('online-count');
                const elMobile = document.getElementById('mobile-online-count');

                if (elDesktop) elDesktop.innerText = count;
                if (elMobile) elMobile.innerText = count + " ON";

                const sync = (98 + Math.random()).toFixed(1);
                const syncEl = document.getElementById('sync-rate');
                if (syncEl) syncEl.innerText = sync + "%";

            }, 3000);
        }

        function simulateCounters() {
            document.getElementById('total-visits').innerText = "1,024";
            document.getElementById('mobile-total-visits').innerText = "1,024";
            startOnlineSimulation();
        }

        // --- 3D Visualization Engine ---
        let scene, camera, renderer;
        let object3D, object4D, object5D;
        let currentDim = 3;
        let targetScale = 1, currentScale = 1;

        function initThreeJS() {
            const container = document.getElementById('three-canvas-container');
            if (!container) return;

            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x020617, 0.02);

            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 6;

            renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer.domElement);

            // 3D: Bio-Sphere
            const geo3D = new THREE.IcosahedronGeometry(1.8, 4);
            const mat3D = new THREE.MeshPhysicalMaterial({
                color: 0x0EA5E9, wireframe: true,
                emissive: 0x0EA5E9, emissiveIntensity: 0.3,
                transparent: true, opacity: 0.8
            });
            object3D = new THREE.Mesh(geo3D, mat3D);
            const core3D = new THREE.Mesh(new THREE.SphereGeometry(1.2, 32, 32), new THREE.MeshBasicMaterial({ color: 0xBAE6FD, transparent: true, opacity: 0.4 }));
            object3D.add(core3D);
            scene.add(object3D);

            // 4D: Hypercube
            object4D = new THREE.Group();
            const boxGeo = new THREE.BoxGeometry(2.2, 2.2, 2.2);
            const boxMat = new THREE.MeshBasicMaterial({ color: 0xD946EF, wireframe: true, transparent: true, opacity: 0.5 });
            const outerBox = new THREE.Mesh(boxGeo, boxMat);
            const innerBox = new THREE.Mesh(new THREE.BoxGeometry(1.0, 1.0, 1.0), new THREE.MeshBasicMaterial({ color: 0xFFFFFF, wireframe: true }));
            object4D.add(outerBox);
            object4D.add(innerBox);
            object4D.visible = false;
            scene.add(object4D);

            // 5D: Cosmic Torus
            object5D = new THREE.Group();
            const torusGeo = new THREE.TorusKnotGeometry(1.4, 0.4, 120, 20);
            const torusMat = new THREE.PointsMaterial({ color: 0xF59E0B, size: 0.04, transparent: true, opacity: 0.8 });
            const torus = new THREE.Points(torusGeo, torusMat);
            const pGeo = new THREE.BufferGeometry();
            const pCount = 800;
            const pPos = new Float32Array(pCount * 3);
            for (let i = 0; i < pCount * 3; i++) pPos[i] = (Math.random() - 0.5) * 12;
            pGeo.setAttribute('position', new THREE.BufferAttribute(pPos, 3));
            const pMat = new THREE.PointsMaterial({ color: 0xFFFFFF, size: 0.03, transparent: true, opacity: 0.5 });
            const particles = new THREE.Points(pGeo, pMat);
            object5D.add(torus);
            object5D.add(particles);
            object5D.visible = false;
            scene.add(object5D);

            const ambient = new THREE.AmbientLight(0x404040);
            scene.add(ambient);
            const light = new THREE.PointLight(0xffffff, 1.5);
            light.position.set(5, 5, 5);
            scene.add(light);

            animate();
            window.addEventListener('resize', onWindowResize, false);
        }

        function onWindowResize() {
            const wrapper = document.getElementById('immersive-stage');
            if (!wrapper) return;
            const width = wrapper.clientWidth;
            const height = wrapper.clientHeight;
            if (camera && renderer) {
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
                renderer.setSize(width, height);
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            const time = Date.now() * 0.001;

            currentScale += (targetScale - currentScale) * 0.04;

            if (object3D.visible) {
                object3D.scale.setScalar(currentScale);
                object3D.rotation.y += 0.003;
                object3D.rotation.z += 0.001;
                object3D.children[0].scale.setScalar(0.8 + Math.sin(time * 2) * 0.1);
            }

            if (object4D.visible) {
                object4D.scale.setScalar(currentScale * 0.9);
                object4D.children[0].rotation.x += 0.01;
                object4D.children[0].rotation.y += 0.005;
                object4D.children[1].rotation.x -= 0.02;
                object4D.children[1].rotation.y -= 0.01;
            }

            if (object5D.visible) {
                object5D.scale.setScalar(currentScale);
                object5D.children[0].rotation.z -= 0.005;
                object5D.children[0].rotation.x += 0.002;
                object5D.children[1].rotation.y += 0.001;
            }
            renderer.render(scene, camera);
        }

        // --- Controller ---
        let isRunning = false;
        let totalCycles = 4;
        let cycleCount = 0;
        let timerInterval, sessionTimeout;

        function selectDimension(dim) {
            if (isRunning) return;
            currentDim = dim;

            document.querySelectorAll('.mode-btn').forEach(b => {
                b.classList.remove('selected-3d', 'selected-4d', 'selected-5d');
                b.style.opacity = '0.6';
            });

            const btn = document.getElementById(`btn-dim-${dim}`);
            btn.style.opacity = '1';

            if (dim === 3) {
                btn.classList.add('selected-3d');
                totalCycles = 4;
                updateScene(true, false, false);
                updateLabels("Bio-Optimization", "‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ & ‡∏™‡∏°‡∏≠‡∏á: ‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏ã‡∏•‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û", "#0EA5E9");
            } else if (dim === 4) {
                btn.classList.add('selected-4d');
                totalCycles = 8;
                updateScene(false, true, false);
                updateLabels("Psi-Activation", "‡∏û‡∏•‡∏±‡∏á‡∏à‡∏¥‡∏ï & ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î: ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏à‡∏≤‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå", "#D946EF");
            } else {
                btn.classList.add('selected-5d');
                totalCycles = 16;
                updateScene(false, false, true);
                updateLabels("Cosmic Contact", "‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏• & ‡∏ï‡πà‡∏≤‡∏á‡∏î‡∏≤‡∏ß: ‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á", "#F59E0B");
            }
        }

        function updateScene(v3, v4, v5) {
            if (!object3D) return;
            object3D.visible = v3;
            object4D.visible = v4;
            object5D.visible = v5;
        }

        function updateLabels(title, desc, color) {
            document.getElementById('dimension-title').innerText = title;
            document.getElementById('dimension-desc').innerText = desc;
            document.getElementById('timerDisplay').style.color = color;
        }

        async function startBreathing() {
            if (isRunning) return;
            isRunning = true;
            cycleCount = 0;

            document.getElementById('startBtn').classList.add('hidden');
            document.getElementById('stopBtn').classList.remove('hidden');
            document.getElementById('cycleSelectorContainer').classList.add('pointer-events-none', 'opacity-50');

            document.getElementById('instructionText').innerText = "INITIALIZING SEQUENCE...";
            await new Promise(r => setTimeout(r, 1000));
            runCycle();
        }

        function stopBreathing() {
            isRunning = false;
            clearInterval(timerInterval);
            clearTimeout(sessionTimeout);

            document.getElementById('timerDisplay').innerText = "Ready";
            document.getElementById('instructionText').innerText = "‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏ö";

            targetScale = 1;

            document.getElementById('startBtn').classList.remove('hidden');
            document.getElementById('stopBtn').classList.add('hidden');
            document.getElementById('cycleSelectorContainer').classList.remove('pointer-events-none', 'opacity-50');
        }

        function runCycle() {
            if (!isRunning) return;
            if (cycleCount >= totalCycles) {
                finishSession();
                return;
            }
            cycleCount++;

            let tInhale, tHold, tExhale;
            if (currentDim === 3) {
                tInhale = "‡∏™‡∏π‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå (Health)";
                tHold = "‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°‡πÄ‡∏ã‡∏•‡∏•‡πå (Repair)";
                tExhale = "‡∏Ç‡∏±‡∏ö‡πÑ‡∏•‡πà‡πÇ‡∏£‡∏Ñ‡∏†‡∏±‡∏¢ (Detox)";
            } else if (currentDim === 4) {
                tInhale = "‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏õ‡∏±‡∏ç‡∏ç‡∏≤ (Wisdom)";
                tHold = "‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏û‡∏•‡∏±‡∏á‡∏à‡∏¥‡∏ï (Charge)";
                tExhale = "‡πÅ‡∏ú‡πà‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ñ‡∏•‡∏∑‡πà‡∏ô (Broadcast)";
            } else {
                tInhale = "‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏á‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏• (Light)";
                tHold = "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì (Connect)";
                tExhale = "‡∏™‡πà‡∏á‡∏™‡∏≤‡∏™‡πå‡∏ô‡∏£‡∏±‡∏Å (Contact)";
            }

            performPhase(tInhale, 4, 2.0, () => {
                if (!isRunning) return;
                performPhase(tHold, 7, 2.2, () => {
                    if (!isRunning) return;
                    performPhase(tExhale, 8, 1.0, () => {
                        if (!isRunning) return;
                        runCycle();
                    });
                });
            });
        }

        function performPhase(text, duration, scale, callback) {
            document.getElementById('instructionText').innerText = text;
            targetScale = scale;
            let left = duration;
            document.getElementById('timerDisplay').innerText = left;

            timerInterval = setInterval(() => {
                left--;
                if (left > 0) document.getElementById('timerDisplay').innerText = left;
            }, 1000);

            sessionTimeout = setTimeout(() => {
                clearInterval(timerInterval);
                callback();
            }, duration * 1000);
        }

        function finishSession() {
            stopBreathing();
            alert("Evolution Sequence Complete. Neural Pathways Updated.");
            const wrapper = document.getElementById('immersive-stage');
            if (wrapper.classList.contains('immersive-active')) toggleImmersive();
        }

        function toggleImmersive() {
            const wrapper = document.getElementById('immersive-stage');
            wrapper.classList.toggle('immersive-active');
            document.body.style.overflow = wrapper.classList.contains('immersive-active') ? 'hidden' : '';
            onWindowResize();
            setTimeout(onWindowResize, 100);
        }

        // --- Charts ---
        let dimChart, freqChart;
        function initCharts() {
            Chart.defaults.color = '#94A3B8';
            Chart.defaults.font.family = "'Noto Sans Thai', sans-serif";

            dimChart = new Chart(document.getElementById('dimChart'), {
                type: 'radar',
                data: {
                    labels: ['‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ (Health)', '‡∏û‡∏•‡∏±‡∏á‡∏à‡∏¥‡∏ï (Psychic)', '‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£ (Contact)', '‡∏™‡∏°‡∏≠‡∏á (Brain)', '‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥ (Action)', '‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì (Spirit)'],
                    datasets: [{
                        label: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (Current)',
                        data: [75, 45, 20, 80, 65, 50],
                        borderColor: '#0EA5E9', backgroundColor: 'rgba(14, 165, 233, 0.2)',
                        borderWidth: 2
                    }, {
                        label: '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏¢‡∏≠‡∏î‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå (Superhuman)',
                        data: [100, 100, 100, 100, 100, 100],
                        borderColor: '#F59E0B', backgroundColor: 'transparent',
                        borderDash: [4, 4], borderWidth: 1
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: { r: { angleLines: { color: 'rgba(255,255,255,0.1)' }, grid: { color: 'rgba(255,255,255,0.1)' }, pointLabels: { font: { size: 10 } } } }
                }
            });

            freqChart = new Chart(document.getElementById('freqChart'), {
                type: 'line',
                data: {
                    labels: ['Start', 'Bio-Opt', 'Psi-Active', 'Cosmic-Contact'],
                    datasets: [{
                        label: 'Frequency (Hz)',
                        data: [20, 40, 100, 963],
                        borderColor: '#D946EF', backgroundColor: 'rgba(217, 70, 239, 0.1)',
                        fill: true, tension: 0.4
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { grid: { color: 'rgba(255,255,255,0.05)' } } } }
            });
        }

        window.onload = () => {
            initThreeJS();
            selectDimension(3);
            initCharts();
            initFirebaseLogic();
        };
    </script>
</body>

</html>